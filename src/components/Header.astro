---
const { pathname } = Astro.url;

const menuItems = [
  { href: '/', text: 'Home', icon: 'bi bi-house-fill' },
  { href: '/blog', text: 'Blog', icon: 'bi bi-journal-text' },
  { href: '/games', text: 'Games', icon: 'bi bi-controller' },
  { href: '/contact', text: 'Contact', icon: 'bi bi-envelope-at' },
];

const isActive = (href: string) => {
  if (href === '/') {
    return pathname === href;
  }
  return pathname.startsWith(href);
};
---

<header>
  <div class="d-flex justify-content-center align-items-center mt-4 mb-3">
    <a href="/" class="hover-scale transition-all">
      <img
        class="img-fluid d-flex"
        src="https://www.robtopgames.com/Images/underConstruction_001.png"
      />
    </a>
  </div>
  
  <nav class="navbar navbar-expand-lg mb-4">
    <div class="container-fluid">
      <div class="w-100 d-flex justify-content-center d-lg-none">
        <button class="navbar-toggler border-0 fs-4 px-3 py-2" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <i class="bi bi-list text-white"></i>
        </button>
      </div>
      <div class="collapse navbar-collapse justify-content-center custom-mobile-menu" id="navbarNav">
        <ul class="navbar-nav gap-3 text-center py-3">
          {menuItems.map((item) => (
            <li class="nav-item">
              <a
                class={`nav-link text-white d-flex align-items-center justify-content-center gap-2 px-4 py-3 rounded-4 transition-all ${isActive(item.href) ? 'active' : 'hover-bright'}`}
                href={item.href}
                aria-current={isActive(item.href) ? 'page' : null}
              >
                <i class={item.icon}></i>
                {item.text}
              </a>
            </li>
          ))}
        </ul>
      </div>
    </div>
  </nav>
</header>

<style>
  .navbar-toggler {
    box-shadow: none;
    background-color: rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    transition: all 0.2s ease-in-out;
  }

  .navbar-toggler:hover {
    background-color: rgba(255, 255, 255, 0.2);
  }
  
  .navbar-toggler:focus {
    box-shadow: none;
  }
  
  .nav-link.active {
    font-weight: bold;
    background-color: rgba(255, 255, 255, 0.15);
  }
  
  .transition-all {
    transition: all 0.2s ease-in-out;
  }
  
  .hover-bright:hover {
    background-color: rgba(255, 255, 255, 0.1);
  }
  
  .hover-scale {
    transform: scale(1);
  }
  
  .hover-scale:hover {
    transform: scale(1.02);
  }

  @media (max-width: 991px) {
    .custom-mobile-menu {
      background-color: rgba(0, 0, 0, 0.2);
      backdrop-filter: blur(10px);
      border-radius: 1rem;
      margin-top: 1rem;
    }

    .nav-link {
      font-size: 1.1rem;
    }

    .nav-link i {
      font-size: 1.25rem;
    }
  }
</style>
